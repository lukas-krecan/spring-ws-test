<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:context="http://www.springframework.org/schema/context"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd">


	<bean id="mock-sender" class="net.javacrumbs.springws.test.MockWebServiceMessageSender"/>

	<bean class="net.javacrumbs.springws.test.generator.DefaultResponseGeneratorFactoryBean">
		<property name="namespaceMap">
			<map>
				<entry key="soapenv" value="http://schemas.xmlsoap.org/soap/envelope/"/>
				<entry key="ns" value="http://www.springframework.org/spring-ws/samples/airline/schemas/messages"/>
			</map>
		</property>
		<property name="XPathExpressions">
			<list>
				<value>concat('mock-responses/',$uri.host, '/', local-name(//soapenv:Body/*[1]),'/',//ns:from,'-',//ns:to,'-response.xml')</value>
				<value>concat('mock-responses/',$uri.host, '/', local-name(//soapenv:Body/*[1]),'/default-response.xml')</value>
			</list>
		</property>
	</bean>		
	
	<!-- 'mock-responses/' + $uri.host + '/' + #payloadRootName + '/' + #xpath(//ns:from) + '-' + #xpath(//ns:to) + '-response.xml' -->	

	<bean class="net.javacrumbs.springws.test.validator.XmlCompareRequestValidatorFactoryBean">
		<property name="namespaceMap">
			<map>
				<entry key="soapenv" value="http://schemas.xmlsoap.org/soap/envelope/"/>
				<entry key="ns" value="http://www.springframework.org/spring-ws/samples/airline/schemas/messages"/>
			</map>
		</property>
		<property name="XPathExpressions">
			<list>
				<value>concat('mock-responses/',$uri.host, '/', local-name(//soapenv:Body/*[1]),'/',//ns:from,'-',//ns:to,'-request.xml')</value>
			</list>
		</property>		
	</bean>			
	
	<bean class="net.javacrumbs.springws.test.validator.SchemaRequestValidator">
		<property name="schema" value="xml/schema.xsd"/>
	</bean>
	
	<bean class="net.javacrumbs.springws.test.validator.XPathRequestValidatorFactoryBean">
		<property name="namespaceMap">
			<map>
				<entry key="soapenv" value="http://schemas.xmlsoap.org/soap/envelope/"/>
				<entry key="ns" value="http://www.springframework.org/spring-ws/samples/airline/schemas/messages"/>
			</map>
		</property>
		<property name="exceptionMapping">
			<map>
				<entry key="//ns:serviceClass != 'economy' and //ns:serviceClass != 'business'" value="Unsupported service class"/>
			</map>
		</property>
	</bean>
	
	<bean class="net.javacrumbs.springws.test.generator.WebServiceTransportExceptionGeneratorFactoryBean">
		<property name="namespaceMap">
			<map>
				<entry key="soapenv" value="http://schemas.xmlsoap.org/soap/envelope/"/>
				<entry key="ns" value="http://www.springframework.org/spring-ws/samples/airline/schemas/messages"/>
			</map>
		</property>
		<property name="exceptionMapping">
			<map>
				<entry key="//ns:from = 'DUB' and //ns:to = 'LHR'" value="Authorization failed"/>
			</map>
		</property>
	</bean>
</beans>
